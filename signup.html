<!DOCTYPE html>
<html lang="en" class="h-full" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Sign up for NextStep" />  
      
    <title>NextStep - Sign Up</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="manifest" href="site.webmanifest">

    <link rel="stylesheet" href="style.css" type="text/css"/>
    <link rel="stylesheet" href="login.css" type="text/css"/>
    <link rel="stylesheet" href="dark-mode.css" type="text/css"/>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome for Footer -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

    <style>
      /* Logged-in banner styles */
      .logged-in-banner {
        position: fixed;
        top: 70px;
        left: 0;
        right: 0;
        background: linear-gradient(135deg, #fef3c7, #fde68a);
        border-bottom: 2px solid #f59e0b;
        padding: 15px 20px;
        display: none;
        align-items: center;
        justify-content: space-between;
        z-index: 999;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      }

      .logged-in-banner.show {
        display: flex;
      }

      .banner-content {
        display: flex;
        align-items: center;
        gap: 15px;
        flex: 1;
      }

      .banner-icon {
        font-size: 24px;
      }

      .banner-text {
        display: flex;
        flex-direction: column;
        gap: 3px;
      }

      .banner-title {
        font-weight: 700;
        color: #92400e;
        font-size: 16px;
      }

      .banner-subtitle {
        color: #78350f;
        font-size: 14px;
      }

      .banner-actions {
        display: flex;
        gap: 10px;
      }

      .banner-btn {
        padding: 8px 20px;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        border: none;
        font-size: 14px;
      }

      .btn-home {
        background: white;
        color: #92400e;
        border: 2px solid #f59e0b;
      }

      .btn-home:hover {
        background: #fef3c7;
      }

      .btn-logout {
        background: #ef4444;
        color: white;
      }

      .btn-logout:hover {
        background: #dc2626;
        transform: translateY(-2px);
      }

      .login-main.with-banner {
        padding-top: 170px;
      }

      @media (max-width: 768px) {
        .logged-in-banner {
          flex-direction: column;
          align-items: stretch;
          gap: 10px;
          padding: 12px 15px;
        }

        .banner-content {
          flex-direction: column;
          align-items: flex-start;
        }

        .banner-actions {
          width: 100%;
        }

        .banner-btn {
          flex: 1;
        }
      }
    </style>
  </head>
  <body>
  <nav>
    <div class="navbar">
      <div class="navdiv">
        <!-- Logo -->
        <div class="logo">
          <a href="index.html">
            <img src="logo.png" alt="NextStep Logo" class="logo-image">
          </a>
        </div>

        <!-- Navigation links -->
        <nav class="nav-links">
          <ul>
            <li class="navbar-item"><a href="index.html">Home</a></li>
            <li class="navbar-item"><a href="map.html">Map</a></li>
            <li class="navbar-item"><a href="events.html">Events</a></li>
            <li class="navbar-item"><a href="chatbot.html">Compass</a></li>
            <li class="navbar-item"><a href="badges.html">Badges</a></li>
            <li class="navbar-item"><a href="contact.html">Contact Us</a></li>
          </ul>
        </nav>

        <!-- Login/Sign Up -->
        <div class="nav-right">
          <a href="login.html" class="login">Login</a>
          <a href="signup.html" class="signup active">Sign Up</a>
        </div>
      </div>
    </div>
  </nav>

    <!-- Logged-in banner -->
    <div id="logged-in-banner" class="logged-in-banner">
      <div class="banner-content">
        <span class="banner-icon">ðŸ‘¤</span>
        <div class="banner-text">
          <div class="banner-title">Already Logged In</div>
          <div class="banner-subtitle">You're logged in as <span id="banner-email"></span></div>
        </div>
      </div>
      <div class="banner-actions">
        <button class="banner-btn btn-home" onclick="window.location.href='index.html'">
          Go to Home
        </button>
        <button class="banner-btn btn-logout" onclick="handleLogout()">
          Logout
        </button>
      </div>
    </div>

    <main class="login-main" id="main-content">
      <div class="login-container">
        <!-- Sign Up Card -->
        <div class="login-card signup-card">
          <h1>Create Account</h1>
          <p class="login-subtitle">Join NextStep and make a difference</p>

          <form id="signup-form" class="auth-form">
            <div class="form-group">
              <label for="signup-name">Full Name</label>
              <input type="text" id="signup-name" required placeholder="John Doe">
            </div>

            <div class="form-group">
              <label for="signup-email">Email</label>
              <input type="email" id="signup-email" required placeholder="your.email@example.com">
            </div>

            <div class="form-group">
              <label for="signup-password">Password</label>
              <input type="password" id="signup-password" required placeholder="At least 6 characters">
            </div>

            <div class="form-group">
              <label for="signup-confirm-password">Confirm Password</label>
              <input type="password" id="signup-confirm-password" required placeholder="Re-enter your password">
            </div>

            <button type="submit" class="submit-button">
              <span>Create Account</span>
              <span class="button-icon">â†’</span>
            </button>
          </form>

          <div class="divider">
            <span>or</span>
          </div>

          <div class="social-login">
            <button id="google-signup" class="social-button google" type="button">
              <span class="social-icon">G</span>
              <span>Sign up with Google</span>
            </button>
          </div>

          <p class="switch-auth">
            Already have an account? <a href="login.html">Sign in</a>
          </p>
        </div>
      </div>
    </main>

    <footer>
      <div class="footer-content">
        <div class="footer-grid">
          <!-- About Section -->
          <div class="footer-section footer-about">
            <h3>NEXTSTEP</h3>
            <p>Empowering communities through civic engagement. Discover local events, connect with your neighbors, and
              make a real difference in Boca Raton.</p>
            <div class="social-links">
               <a href="#" class="social-link" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="social-link" aria-label="X (Twitter)"><i class="fab fa-x-twitter"></i></a>
                <a href="#" class="social-link" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" class="social-link" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
            </div>
          </div>

          <!-- Quick Links -->
          <div class="footer-section">
            <h4>Quick Links</h4>
            <ul class="footer-links">
              <li><a href="index.html">Home</a></li>
              <li><a href="map.html">Map</a></li>
              <li><a href="events.html">Events</a></li>
              <li><a href="chatbot.html">Compass</a></li>
              <li><a href="contact.html">Contact Us</a></li>
            </ul>
          </div>

          <!-- Resources -->
          <div class="footer-section">
            <h4>Resources</h4>
            <ul class="footer-links">
              <li><a href="#">About Us</a></li>
              <li><a href="#">Blog</a></li>
              <li><a href="#">FAQs</a></li>
              <li><a href="#">Volunteer</a></li>
              <li><a href="#">Partners</a></li>
            </ul>
          </div>

          <!-- Newsletter -->
          <div class="footer-section">
            <h4>Stay Updated</h4>
            <p style="opacity: 0.5; font-size: 0.95rem; margin-bottom: 1rem;">Subscribe to our newsletter for the latest
              civic events and opportunities.</p>
            <form class="newsletter-form" onsubmit="event.preventDefault();">
              <input type="email" class="newsletter-input" placeholder="Your email" required>
              <button type="submit" class="newsletter-button">Join</button>
            </form>
          </div>
        </div>

        <!-- Footer Bottom -->
        <div class="footer-bottom">
          <p>&copy; 2025 NextStep. All rights reserved.</p>
          <div class="footer-bottom-links">
            <a href="#">Privacy Policy</a>
            <a href="#">Terms of Service</a>
            <a href="#">Accessibility</a>
          </div>
        </div>
      </div>
    </footer>

    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
      import { getAuth, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

      const firebaseConfig = {
        apiKey: "AIzaSyBohx_5opFEgh2Xb-EO977v3KzQJ89CAf4",
        authDomain: "NextStep.firebaseapp.com",
        projectId: "NextStep",
        storageBucket: "NextStep.firebasestorage.app",
        messagingSenderId: "428056422654",
        appId: "1:428056422654:web:2d6ff0d08002134b3cddaf",
        measurementId: "G-E0YCVB3KK9"
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      window.firebaseAuth = auth;

      // Check if user is logged in and show banner instead of redirecting
      onAuthStateChanged(auth, (user) => {
        if (user) {
          console.log('User is logged in:', user.email);
          const banner = document.getElementById('logged-in-banner');
          const bannerEmail = document.getElementById('banner-email');
          const mainContent = document.getElementById('main-content');
          
          banner.classList.add('show');
          bannerEmail.textContent = user.email;
          mainContent.classList.add('with-banner');
        }
      });

      // Logout function
      window.handleLogout = async function() {
        if (confirm('Are you sure you want to logout?')) {
          try {
            await signOut(auth);
            localStorage.clear();
            window.location.reload();
          } catch (error) {
            console.error('Error logging out:', error);
            alert('Error logging out. Please try again.');
          }
        }
      };
    </script>

    <!-- Load Firebase scripts -->
    <script type="module" src="signup.js"></script>
    <script type="module" src="auth-check.js"></script>
    <script src="dark-mode.js"></script>

  </body>
</html>